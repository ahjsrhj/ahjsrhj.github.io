<!DOCTYPE html><html lang=zh-CN><head><meta name=generator content="Hexo 3.9.0"><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><title>将博客从WordPress迁移到Hexo · Hexer</title><meta name=description content="将博客从WordPress迁移到Hexo - Hexer"><meta name=viewport content="width=device-width, initial-scale=1"><link rel=icon href=https://i.loli.net/2018/12/05/5c07807cb76f9.png><link rel=stylesheet href=/css/apollo.css><link rel=search type=application/opensearchdescription+xml href=https://imrhj.cn/atom.xml title=Hexer></head><body><div class=wrap><header><a href="/" class=logo-link><img src=https://i.loli.net/2018/12/05/5c07807cb76f9.png alt=logo></a><ul class="nav nav-list"><li class=nav-list-item><a href="/" target=_self class=nav-list-link>BLOG</a></li><li class=nav-list-item><a href="/archives/" target=_self class=nav-list-link>ARCHIVE</a></li><li class=nav-list-item><a href="/about/" target=_self class=nav-list-link>ABOUT</a></li><li class=nav-list-item><a href=https://github.com/ahjsrhj target=_blank class=nav-list-link>GITHUB</a></li><li class=nav-list-item><a href="/friend/" target=_self class=nav-list-link>FRIEND</a></li></ul><script src=/js/canvas-nest-check.js></script></header><main class=container><div class=post><article class=post-block><h1 class=post-title>将博客从WordPress迁移到Hexo</h1><div class=post-info>2016年4月6日</div><div class=post-content><p><img src=https://i.loli.net/2019/06/14/5d039861a161221107.png alt=1560516703395.png></p><p>一直想去学习markdown的使用，最近发现了一个静态博客<a href="https://hexo.io/zh-cn/" target=_blank rel=noopener>Hexo</a>很好用，趁着最近清闲下来，学着将博客转移到hexo上,使用静态页面。</p><a id=more></a><h1 id=安装教程><a href=#安装教程 class=headerlink title=安装教程></a>安装教程</h1><p><del>请参照<a href="https://hexo.io/zh-cn/docs/" target=_blank rel=noopener>官方教程</a></del></p><h1 id=使用Travis-CI自动部署><a href=#使用Travis-CI自动部署 class=headerlink title="使用Travis CI自动部署"></a>使用Travis CI自动部署</h1><p>在使用的时候，发现每次写完文章都要手动推送到github,之后在使用hexo g -d进行部署，比较繁琐，因此发现了一个用于<del>装逼</del>自动构建的网站<a href="https://travis-ci.org/" target=_blank rel=noopener>Travis CI</a>，这个网站是免费网站，目前Github上的绝大多数项目都已经移入到Travis CI的构建队列中。</p><h2 id=准备><a href=#准备 class=headerlink title=准备></a>准备</h2><blockquote><p>一个github帐号</p></blockquote><blockquote><p>一台电脑<del>(Linux/Uinx更佳)</del></p></blockquote><blockquote><p>一个Travis CI帐号</p></blockquote><h2 id=建立-travis-yml文件><a href=#建立-travis-yml文件 class=headerlink title=建立.travis.yml文件></a>建立.travis.yml文件</h2><ul><li>什么是.travis.yml文件？</li><li>简单来说，Travis CI通过Docker自动部署一个虚拟化平台，在上面安装一系列软件环境来模拟你的编译环境，这个文件就是来高数Travis CI怎么去构建这个环境。直接贴出来我的</li></ul><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre></td><td class=code><pre><span class=line> language: node_js</span><br><span class=line>sudo: <span class=literal>false</span></span><br><span class=line>node_js:</span><br><span class=line>- stable</span><br><span class=line>before_install:</span><br><span class=line>- openssl aes-256-cbc -K <span class=variable>$encrypted_8926b8c4a31e_key</span> -iv <span class=variable>$encrypted_8926b8c4a31e_iv</span></span><br><span class=line>  -<span class=keyword>in</span> ssh_key.enc -out ~/.ssh/id_rsa -d</span><br><span class=line>- chmod 600 ~/.ssh/id_rsa</span><br><span class=line>- <span class=built_in>eval</span> $(ssh-agent)</span><br><span class=line>- ssh-add ~/.ssh/id_rsa</span><br><span class=line>- cp ssh_config ~/.ssh/config</span><br><span class=line>- npm install hexo-cli -g</span><br><span class=line>script:</span><br><span class=line>- hexo clean</span><br><span class=line>- hexo generate</span><br><span class=line>- <span class=built_in>cd</span> public</span><br><span class=line>- git init</span><br><span class=line>- git config user.name <span class=string>"ahjsrhj"</span></span><br><span class=line>- git config user.email aha199277@qq.com</span><br><span class=line>- git add .</span><br><span class=line>- git commit -m <span class=string>"Update docs"</span></span><br><span class=line>- git remote add origin git@github.com:ahjsrhj/ahjsrhj.github.io.git</span><br><span class=line>- git push -f origin master</span><br><span class=line></span><br><span class=line>branches:</span><br><span class=line>  only:</span><br><span class=line>    - blog</span><br></pre></td></tr></table></figure><p>注意其中的<code>openssl aes-256-cbc -K $encrypted_8926b8c4a31e_key -iv $encrypted_8926b8c4a31e_iv</code>这一行不要套用，应替换为自己的。在使用的时候先删除这一行和下面一行，其中部分信息修改为自己的。</p><h2 id=生成Deploy-Key><a href=#生成Deploy-Key class=headerlink title="生成Deploy Key"></a>生成Deploy Key</h2><ol><li>使用<code>ssh-key</code>制作一个 SSH key<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>$ ssh-keygen -t rsa -C <span class=string>"your_email@example.com"</span></span><br></pre></td></tr></table></figure></li></ol><p>生成过程中把passphrase留空。</p><ol start=2><li><p>添加Key 到repo中</p><p>生成之后把public key里的信息复制到你的repo的<code>Deploy keys</code>那里，如下。</p></li></ol><p><img src=https://i.loli.net/2019/06/14/5d0398755786b47960.png alt=1560516722159.png><br>不应该添加到账户的<code>SSH and GPG keys</code>，这样能够限制key的权限只在当前项目。</p><h2 id=加密Deploy-Key><a href=#加密Deploy-Key class=headerlink title="加密Deploy Key"></a>加密Deploy Key</h2><ol><li>安装Travis命令行工具，并登录<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>$ gem install travis</span><br><span class=line>$ travis login --auto</span><br></pre></td></tr></table></figure></li></ol><p>在登录时可能需要你的github帐号信息。</p><ol start=2><li>加密<br>将刚刚生成的ssh_key复制到hexo blog根目录,在blog目录下执行<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>$ travis encrypt-file ssh_key --add</span><br></pre></td></tr></table></figure></li></ol><p>若是提示找不到repo,使用<code>r</code>指令手动指定repo<br><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>$ travis encrypt-file ssh_key --add -r ahjsrhj/ahjsrhj.github.io</span><br></pre></td></tr></table></figure></p><p>之后Travis CI网站上对应repo设置里能看到两个值，同时你的.travis.yml文件中应该自动出现了一句类似这样的代码<br><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>- openssl aes-256-cbc -K <span class=variable>$encrypted_8926b8c4a31e_key</span> -iv <span class=variable>$encrypted_8926b8c4a31e_iv</span></span><br><span class=line>  -<span class=keyword>in</span> ssh_key.enc -out ~/.ssh/id_rsa -d</span><br></pre></td></tr></table></figure></p><p>确保能将解密获得的key命名为id_rsa并放在<code>~/.ssh/</code>下面。之后将<strong>ssh_key</strong>删除</p><h2 id=设置SSH并同步><a href=#设置SSH并同步 class=headerlink title=设置SSH并同步></a>设置SSH并同步</h2><p>再根目录建立<code>ssh_config</code>文件，设置Travis上的SSH<br><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>Host github.com</span><br><span class=line>  User git</span><br><span class=line>  StrictHostKeyChecking no</span><br><span class=line>  IdentityFile ~/.ssh/id_rsa</span><br><span class=line>  IdentitiesOnly yes</span><br></pre></td></tr></table></figure></p><p>之后设定便结束了,将代码同步到github，静等一分钟，enjoy it~</p></div></article></div></main><footer><div class=paginator><a href="/2016/open-os-x-ntfs/" class=prev>PREV</a></div><script>var comments = 'true';
if (comments === 'true') {
    (function() {
        var vl = document.createElement('script');
        vl.src = '//cdn1.lncld.net/static/js/3.0.4/av-min.js';
        vl.async = true;
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(vl);
        var vl2 = document.createElement('script');
        vl2.src = '//unpkg.com/valine/dist/Valine.min.js';
        vl2.async = true;
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(vl2);
        var commitDiv = document.createElement('div');
        commitDiv.id='comment';
        document.getElementsByTagName('footer')[0].appendChild(commitDiv);
    })();
}</script><div class=copyright><p>© 2015 - 2021 <a href=https://imrhj.cn>Hexer</a>, <a href="http://beian.miit.gov.cn/" target=_blank>皖ICP备16006159号-1</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity=sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW crossorigin=anonymous></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-109294877-1",'auto');ga('send','pageview');</script><script>var comments = 'true';
if (comments === 'true') {
    (function() {
        let _tt = 20;
        let _tc = setInterval(() => {
            try {
                new Valine({
                    el: '#comment' ,
                    notify:false, 
                    verify:false, 
                    appId: 'lMIQlAfa6UoprWfiEDOceMSz-gzGzoHsz',
                    appKey: 'KiGYzc5UupBdbac67AJA54dJ',
                    placeholder: '来都来了，说点啥不 ٩(●˙▿˙●)۶…⋆ฺ',
                    path:window.location.pathname, 
                    avatar:'identicon',
                    guest_info: ['nick','link']
                });
                clearInterval(_tc)
            } catch(e) {
                _tt--;
                if (_tt < 1) {
                    clearInterval(_tc)
                }
            }
        }, 500)
    })();
}</script></body></html>